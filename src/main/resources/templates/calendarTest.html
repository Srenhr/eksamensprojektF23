<!DOCTYPE html>
<html>
<head>
    <!-- Include FullCalendar CSS from CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@3.10.2/dist/fullcalendar.min.css" />

    <!-- Other head elements -->
</head>
<body>
<div id="calendar"></div>

<!-- Include FullCalendar JavaScript from CDN -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.7/index.global.min.js" crossorigin="anonymous"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var calendarEl = document.getElementById('calendar');

      // Fetch appointments and initialize FullCalendar
      fetch('http://localhost:8080/employees/1/appointments')
        .then(response => response.json())
        .then(data => {
          // Format the appointment data for FullCalendar
          var events = data.map(appointment => ({
            id: appointment.id,
              title: appointment.user.firstName + ' ' + appointment.user.lastName,
            start: appointment.startTimeIso8601,
            end: appointment.endTimeIso8601,
            // Add any additional properties or formatting as needed
          }));

            function formatTime(time) {
                var date = new Date(time);
                var hour = date.getHours();
                var minute = date.getMinutes();
                return ('0' + hour).slice(-2) + ':' + ('0' + minute).slice(-2);
            }

          // Initialize FullCalendar
          var calendar = new FullCalendar.Calendar(calendarEl, {
            // Set the desired options for FullCalendar
            // ...

            // Pass the formatted appointment data to FullCalendar
            events: events,
            // Specify the event time format for display
            eventTimeFormat: {
              hour: '2-digit',
              minute: '2-digit',
                hour12: false,
                hour24: true
            },
            // Add event click handler
            eventClick: function(info) {
              // Handle event click logic here
              console.log('Event clicked:', info.event);
            }
          });

          // Render the calendar
          calendar.render();
        });
    });
  </script>
</body>
</html>